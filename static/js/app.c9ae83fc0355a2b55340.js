webpackJsonp([0],{"23qz":function(t,e){},"9FiO":function(t,e){},"9wtT":function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=o("VU/8")({name:"App"},s,!1,function(t){o("9wtT")},null,null).exports,n=o("/ocq"),l={name:"",data:function(){return{halfEdge:this.roulette.sectorHalfEdge,height:this.roulette.sectorHeight}},computed:{sectorClass:function(){return{borderTopColor:this.settings.color,borderTopWidth:this.height+"px",borderLeftWidth:this.halfEdge+"px",borderRightWidth:this.halfEdge+"px",borderBottomWidth:"0px",transform:"rotate("+360*this.settings.arc/(2*Math.PI)+"deg)",left:"calc(50% - "+this.halfEdge+"px)",top:"calc(50% - "+this.height+"px"}}},props:["settings","roulette"]},a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"circle-sector",style:this.sectorClass})},staticRenderFns:[]};var c={name:"Roulette",props:["configs"],data:function(){return{}},computed:{roulette:function(){return{r:this.configs.radius,size:this.configs.radius*Math.cos(2*Math.PI/(2*this.configs.side))*2,sectorHeight:this.configs.radius*Math.cos(2*Math.PI/(2*this.configs.side)),sectorHalfEdge:this.configs.radius*Math.sin(2*Math.PI/(2*this.configs.side))}},sectorList:function(){var t=this;return this.configs.cardList.map(function(e,o){return e.arc=o*Math.PI*2/t.configs.side,e})},rouletteClass:function(){var t={width:this.roulette.size+"px",height:this.roulette.size+"px",transform:"rotate("+this.configs.currentRotate+"deg)"};return this.configs.ready&&(t.transition="transform "+this.configs.rotateTime+"s"),t}},methods:{emitReset:function(){this.$emit("reset")}},components:{Sector:o("VU/8")(l,a,!1,function(t){o("23qz")},"data-v-4b22b574",null).exports}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"roulette",style:t.rouletteClass,on:{transitionend:t.emitReset}},[t._l(t.sectorList,function(e){return[o("Sector",{attrs:{settings:e,roulette:t.roulette}})]})],2)},staticRenderFns:[]};var d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"user-status"},[o("div",{staticClass:"name"},[t._v(t._s(t.userName))]),t._v(" "),o("div",{staticClass:"money"},[t._v(t._s(t.userMoney))]),t._v(" "),o("ul",{staticClass:"hold-cards"},t._l(t.holdCards,function(e){return o("li",{staticClass:"card",style:{background:e.color}},[t._v(t._s(e.total))])}))])},staticRenderFns:[]};var h={name:"Game",mounted:function(){this.adjustRouletteWidth(),setInterval(this.game,1e3)},data:function(){return{isDebugging:!1,userName:null,systemMsg:null,users:[],cardShop:[{color:"dodgerblue",price:1},{color:"lightgreen",price:1},{color:"crimson",price:1},{color:"yellow",price:1},{color:"violet",price:1},{color:"gold",price:1},{color:"silver",price:1}],cardMark:null,ready:!0,canBuy:!0,maxTime:59,currentTime:59,stage:[{limit:25,text:"請玩家購買卡片"},{limit:20,text:"輪盤即將開轉..."},{limit:10,text:"輪盤轉動中..."},{limit:0,text:"開獎！"}],result:null,resultReady:!1,configs:{side:54,radius:300,boxSize:2.1,round:20,rotateTime:10,currentRotate:0,cardList:[{color:"silver",money:52,total:1},{color:"dodgerblue",money:2,total:2},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:2},{color:"crimson",money:7,total:7},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:2},{color:"yellow",money:13,total:4},{color:"dodgerblue",money:2,total:2},{color:"crimson",money:7,total:7},{color:"dodgerblue",money:2,total:2},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:2},{color:"violet",money:26,total:2},{color:"dodgerblue",money:2,total:2},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:2},{color:"crimson",money:7,total:7},{color:"dodgerblue",money:2,total:2},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:2},{color:"yellow",money:13,total:4},{color:"dodgerblue",money:2,total:2},{color:"crimson",money:7,total:7},{color:"dodgerblue",money:2,total:2},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:2},{color:"gold",money:52,total:1},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:2},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:2},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:1},{color:"yellow",money:13,total:4},{color:"dodgerblue",money:2,total:2},{color:"crimson",money:7,total:7},{color:"dodgerblue",money:2,total:2},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:2},{color:"violet",money:26,total:2},{color:"dodgerblue",money:2,total:2},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:2},{color:"crimson",money:7,total:7},{color:"dodgerblue",money:2,total:2},{color:"yellow",money:13,total:4},{color:"dodgerblue",money:2,total:2},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:2},{color:"crimson",money:7,total:7},{color:"dodgerblue",money:2,total:2},{color:"lightgreen",money:4,total:13},{color:"dodgerblue",money:2,total:2}]}}},computed:{userListEmpty:function(){return 0===this.users.length},showStatus:function(){switch(!0){case this.currentTime>this.stage[0].limit:return this.stage[0].text;case this.currentTime>this.stage[1].limit:return this.stage[1].text+" 還剩 "+(this.currentTime-this.stage[1].limit)+" 秒";case this.currentTime>this.stage[2].limit:return this.stage[2].text;case this.currentTime>=this.stage[3].limit:return this.stage[3].text;default:return"請重新整理頁面..."}},showResult:function(){if(this.result&&this.resultReady)return this.result},resultStyle:function(){if(this.result&&this.resultReady)return{color:this.result.color}}},filters:{toMessage:function(t){if(t)return"恭喜 "+{dodgerblue:"藍卡",lightgreen:"綠卡",crimson:"紅卡",yellow:"黃卡",violet:"紫卡",gold:"金卡",silver:"鑽卡"}[t.color]+" 持有人獲得每張卡片 "+t.money+" 元！"}},methods:{joinGame:function(t){t.preventDefault(),this.userName?(this.users.push({name:this.userName.trim(),money:50,holdCards:{dodgerblue:0,lightgreen:0,crimson:0,yellow:0,violet:0,gold:0,silver:0}}),this.userName=null):alert("名字和人生一樣，不能留白！")},adjustRouletteWidth:function(){innerWidth>=innerHeight?this.configs.radius=innerHeight/Math.sqrt(2)/2:this.configs.radius=innerWidth/Math.sqrt(2)/2},game:function(){this.currentTime>0?this.currentTime--:this.currentTime+=this.maxTime,this.currentTime===this.stage[0].limit&&(this.canBuy=!1),this.currentTime===this.stage[1].limit&&this.rotateWheel(),this.currentTime===this.stage[2].limit&&(this.resultReady=!0,this.settleAccounts()),this.currentTime===this.maxTime&&(this.resultReady=!1,this.canBuy=!0)},addCard:function(t){this.canBuy?this.users[0].money>=t.price?(this.users[0].money-=t.price,this.users[0].holdCards[t.color]++):alert("You have no money left!"):alert("Times up!")},cancelCard:function(t){this.canBuy?this.users[0].holdCards[t.color]>0&&(this.users[0].money+=t.price,this.users[0].holdCards[t.color]--):alert("Times up!")},rotateWheel:function(){this.configs.ready=!0;var t=Math.floor(Math.random()*this.configs.side);this.configs.currentRotate=360*-(this.configs.round+t/this.configs.side),this.result=this.configs.cardList[t],console.log(this.result)},resetWheel:function(){this.configs.ready=!1,this.configs.currentRotate%=360},settleAccounts:function(){var t=this;this.users=this.users.map(function(e){for(var o in e.money+=t.result.money*e.holdCards[t.result.color],console.log(t.result.money,e.holdCards[t.result.color],e.money),e.holdCards)e.holdCards[o]=0;return e})}},components:{Roulette:o("VU/8")(c,u,!1,function(t){o("ic6I")},"data-v-265b61fb",null).exports,UserStatus:o("VU/8")({name:"UserStatus",props:["user"],data:function(){return{}},computed:{userName:function(){return this.user.name},userMoney:function(){return this.user.money},holdCards:function(){var t=[];for(var e in this.user.holdCards){var o={color:e,total:this.user.holdCards[e]};o.total>0&&t.push(o)}return t}}},d,!1,function(t){o("9FiO")},"data-v-5bb809d4",null).exports}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"game"}},[o("ul",{staticClass:"player-list"},t._l(t.users,function(t){return o("li",{staticClass:"player-info"},[o("UserStatus",{attrs:{user:t}})],1)})),t._v(" "),o("div",{staticClass:"system-info"},[o("div",{staticClass:"system-message"},[t._v(t._s(t.systemMsg))]),t._v(" "),o("div",{staticClass:"timer"},[t._v(t._s(t.currentTime))]),t._v(" "),o("div",{staticClass:"status"},[t._v(t._s(t.showStatus))]),t._v(" "),o("div",{staticClass:"result",style:t.resultStyle},[t._v(t._s(t._f("toMessage")(t.showResult)))])]),t._v(" "),o("div",{staticClass:"roulette-box"},[o("Roulette",{attrs:{configs:t.configs},on:{reset:t.resetWheel}})],1),t._v(" "),o("ul",{staticClass:"card-shop"},t._l(t.cardShop,function(e){return o("li",{staticClass:"card",style:{background:e.color}},[o("div",{staticClass:"sensor",on:{click:function(o){t.addCard(e)}}},[t._v("+")]),t._v(" "),o("div",{staticClass:"sensor",on:{click:function(o){t.cancelCard(e)}}},[t._v("-")])])})),t._v(" "),t.userListEmpty?o("form",{staticClass:"join"},[o("p",[t._v("請輸入名稱：")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],attrs:{name:"name",type:"text"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}}),t._v(" "),o("input",{staticClass:"enter",attrs:{type:"submit",value:"Enter"},on:{click:function(e){t.joinGame(e)}}})]):t._e(),t._v(" "),t.isDebugging?o("button",{on:{click:t.rotateWheel}},[t._v("Start")]):t._e()])},staticRenderFns:[]};var g=o("VU/8")(h,m,!1,function(t){o("eN2p")},"data-v-6a11c5b6",null).exports;r.a.use(n.a);var f=new n.a({routes:[{path:"/",name:"Game",component:g}]});r.a.config.productionTip=!1,new r.a({el:"#app",router:f,components:{App:i},template:"<App/>"})},eN2p:function(t,e){},ic6I:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c9ae83fc0355a2b55340.js.map